import folium
from folium import CustomIcon

# 1. Configuration initiale (Paris)
centre_ville = [48.8566, 2.3522]
jeu = folium.Map(location=centre_ville, zoom_start=14, tiles="cartodbpositron")

# 2. Donn√©es des clients (Position, Nom, Bagage)
clients = [
    {"pos": [48.8584, 2.2945], "nom": "Client Tour Eiffel", "objet": "Valise de luxe"},
    {"pos": [48.8606, 2.3376], "nom": "Client Louvre", "objet": "Sac √† dos myst√©rieux"},
    {"pos": [48.8529, 2.3501], "nom": "Client Notre-Dame", "objet": "Caisse de souvenirs"},
    {"pos": [48.8738, 2.2950], "nom": "Client Arc de Triomphe", "objet": "Gros colis de mode"}
]

# 3. Ajouter les clients sur la carte
for c in clients:
    # On cr√©e un texte sp√©cial pour le popup (le "jeu")
    html_popup = f"""
    <div style="font-family: Arial; width: 150px;">
        <h4>üöñ {c['nom']}</h4>
        <p><b>Objet:</b> {c['objet']}</p>
        <button onclick="alert('Bagage r√©cup√©r√© ! En route pour la prochaine course üèçÔ∏èüí®'); this.parentElement.innerHTML='‚úÖ R√©cup√©r√© !';">
            Prendre le bagage
        </button>
    </div>
    """
    
    # Utilisation d'une ic√¥ne de personne ou de sac
    folium.Marker(
        location=c['pos'],
        popup=folium.Popup(html_popup, max_width=200),
        icon=folium.Icon(color="orange", icon="user", prefix="fa")
    ).add_to(jeu)

# 4. Ajouter le Moto-Taxi (Le joueur)
# On place le joueur au centre au d√©part
folium.Marker(
    location=[48.8540, 2.3450],
    popup="C'est vous ! D√©placez-vous vers les clients.",
    icon=folium.Icon(color="black", icon="motorcycle", prefix="fa")
).add_to(jeu)

# 5. Instructions
instructions = """
<div style="position: fixed; top: 10px; left: 50px; width: 250px; z-index:9999; 
     background: white; padding: 10px; border: 2px solid black; border-radius: 10px;">
     <h4>üèçÔ∏è Mission Moto-Taxi</h4>
     <p>Cliquez sur les ic√¥nes <b>orange</b> pour r√©cup√©rer les bagages des clients parisiens !</p>
</div>
"""
jeu.get_root().html.add_child(folium.Element(instructions))

# Sauvegarde et message
jeu.save("jeu_moto_taxi.html")
print("‚úÖ Le jeu a √©t√© g√©n√©r√© ! Ouvre le fichier 'jeu_moto_taxi.html' dans ton navigateur.")

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Jeu de Dames - 12 Pions</title>
    <style>
        body { display: flex; flex-direction: column; align-items: center; background: #1a1a1a; color: white; font-family: 'Segoe UI', sans-serif; margin: 0; padding: 20px; touch-action: manipulation; }
        #board { display: grid; grid-template-columns: repeat(8, 40px); grid-template-rows: repeat(8, 40px); border: 8px solid #5d4037; box-shadow: 0 10px 20px rgba(0,0,0,0.5); }
        .square { width: 40px; height: 40px; display: flex; justify-content: center; align-items: center; }
        .black { background-color: #4e342e; }
        .white { background-color: #d7ccc8; }
        .piece { width: 32px; height: 32px; border-radius: 50%; cursor: pointer; border: 3px solid rgba(0,0,0,0.3); transition: transform 0.2s; }
        .red-piece { background: radial-gradient(circle, #ff5252, #b71c1c); }
        .blue-piece { background: radial-gradient(circle, #448aff, #0d47a1); }
        .selected { transform: scale(1.2); border-color: #ffeb3b; box-shadow: 0 0 15px #ffeb3b; }
        h1 { font-size: 1.2rem; margin-bottom: 5px; color: #ffeb3b; }
        #status { font-weight: bold; margin-bottom: 15px; }
    </style>
</head>
<body>

    <h1>Jeu des 12 Pions</h1>
    <p id="status">Tour : Rouges</p>
    <div id="board"></div>

    <script>
        const board = document.getElementById('board');
        const status = document.getElementById('status');
        let selectedPiece = null;
        let turn = 'red';

        function initBoard() {
            board.innerHTML = '';
            for (let r = 0; r < 8; r++) {
                for (let c = 0; c < 8; c++) {
                    const sq = document.createElement('div');
                    sq.className = `square ${(r + c) % 2 === 0 ? 'white' : 'black'}`;
                    sq.dataset.row = r; sq.dataset.col = c;
                    
                    if ((r + c) % 2 !== 0) {
                        if (r < 3) createPiece('red', sq);
                        if (r > 4) createPiece('blue', sq);
                    }
                    sq.onclick = () => handleSquareClick(sq);
                    board.appendChild(sq);
                }
            }
        }

        function createPiece(color, parent) {
            const p = document.createElement('div');
            p.className = `piece ${color}-piece`;
            p.dataset.color = color;
            p.onclick = (e) => {
                e.stopPropagation();
                if (color === turn) {
                    if (selectedPiece) selectedPiece.classList.remove('selected');
                    selectedPiece = p;
                    p.classList.add('selected');
                }
            };
            parent.appendChild(p);
        }

        function handleSquareClick(sq) {
            if (!selectedPiece) return;
            
            const fromSq = selectedPiece.parentElement;
            const r1 = parseInt(fromSq.dataset.row), c1 = parseInt(fromSq.dataset.col);
            const r2 = parseInt(sq.dataset.row), c2 = parseInt(sq.dataset.col);
            const color = selectedPiece.dataset.color;

            if (sq.firstChild || !sq.classList.contains('black')) return;

            const dr = r2 - r1, dc = Math.abs(c2 - c1);

            // Déplacement simple (1 case en diagonale)
            if (dc === 1 && ((color === 'red' && dr === 1) || (color === 'blue' && dr === -1))) {
                executeMove(sq);
            } 
            // Saut pour manger (2 cases en diagonale)
            else if (dc === 2 && ((color === 'red' && dr === 2) || (color === 'blue' && dr === -2))) {
                const midR = r1 + dr / 2, midC = c1 + (c2 - c1) / 2;
                const midSq = document.querySelector(`[data-row="${midR}"][data-col="${midC}"]`);
                if (midSq.firstChild && midSq.firstChild.dataset.color !== color) {
                    midSq.innerHTML = ''; // Le pion est mangé !
                    executeMove(sq);
                }
            }
        }

        function executeMove(sq) {
            sq.appendChild(selectedPiece);
            selectedPiece.classList.remove('selected');
            selectedPiece = null;
            turn = turn === 'red' ? 'blue' : 'red';
            status.innerText = `Tour : ${turn === 'red' ? 'Rouges' : 'Bleus'}`;
        }

        initBoard();
    </script>
</body>
</html>
